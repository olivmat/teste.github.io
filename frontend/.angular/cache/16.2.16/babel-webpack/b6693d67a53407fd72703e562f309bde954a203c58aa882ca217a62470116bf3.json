{"ast":null,"code":"import { PresencaModalComponent } from './presenca-modal/presenca-modal.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/table\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/common\";\nfunction PresencaComponent_th_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 11);\n    i0.ɵɵtext(1, \"Pessoa\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PresencaComponent_td_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const presenca_r8 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.getPessoaName(presenca_r8.person_id));\n  }\n}\nfunction PresencaComponent_th_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 11);\n    i0.ɵɵtext(1, \"Data\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PresencaComponent_td_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const presenca_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(2, 1, presenca_r9.date, \"dd/MM/yyyy\"));\n  }\n}\nfunction PresencaComponent_th_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 11);\n    i0.ɵɵtext(1, \"Observa\\u00E7\\u00E3o\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PresencaComponent_td_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const presenca_r10 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(presenca_r10.observation || \"-\");\n  }\n}\nfunction PresencaComponent_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 13);\n  }\n}\nfunction PresencaComponent_tr_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 14);\n  }\n}\nconst _c0 = function () {\n  return [\"pessoa\", \"date\", \"observation\"];\n};\nexport let PresencaComponent = /*#__PURE__*/(() => {\n  class PresencaComponent {\n    constructor(http, snackBar, dialog) {\n      this.http = http;\n      this.snackBar = snackBar;\n      this.dialog = dialog;\n      this.pessoas = [];\n      this.presencas = [];\n    }\n    ngOnInit() {\n      this.carregarPessoas();\n      this.carregarPresencas();\n    }\n    carregarPessoas() {\n      this.http.get('http://localhost:8000/people/').subscribe(data => this.pessoas = data, error => {\n        console.error('Erro ao carregar pessoas:', error);\n        this.showMessage('Erro ao carregar pessoas', true);\n      });\n    }\n    carregarPresencas() {\n      this.http.get('http://localhost:8000/presences/').subscribe(data => this.presencas = data, error => {\n        console.error('Erro ao carregar presenças:', error);\n        this.showMessage('Erro ao carregar presenças', true);\n      });\n    }\n    abrirModalRegistro() {\n      const dialogRef = this.dialog.open(PresencaModalComponent, {\n        width: '500px'\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result) {\n          this.carregarPresencas();\n        }\n      });\n    }\n    showMessage(message, isError = false) {\n      this.snackBar.open(message, 'Fechar', {\n        duration: 5000,\n        panelClass: isError ? ['error-snackbar'] : ['success-snackbar']\n      });\n    }\n    getPessoaName(pessoaId) {\n      const pessoa = this.pessoas.find(p => p.id === pessoaId);\n      return pessoa ? pessoa.name : 'Pessoa não encontrada';\n    }\n    static {\n      this.ɵfac = function PresencaComponent_Factory(t) {\n        return new (t || PresencaComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.MatSnackBar), i0.ɵɵdirectiveInject(i3.MatDialog));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: PresencaComponent,\n        selectors: [[\"app-presenca\"]],\n        decls: 20,\n        vars: 5,\n        consts: [[1, \"container\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [1, \"table-container\"], [\"mat-table\", \"\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"pessoa\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"date\"], [\"matColumnDef\", \"observation\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n        template: function PresencaComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n            i0.ɵɵtext(2, \"Registro de Presen\\u00E7a\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"button\", 1);\n            i0.ɵɵlistener(\"click\", function PresencaComponent_Template_button_click_3_listener() {\n              return ctx.abrirModalRegistro();\n            });\n            i0.ɵɵelementStart(4, \"mat-icon\");\n            i0.ɵɵtext(5, \"add\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(6, \" Registrar Presen\\u00E7a \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"div\", 2)(8, \"table\", 3);\n            i0.ɵɵelementContainerStart(9, 4);\n            i0.ɵɵtemplate(10, PresencaComponent_th_10_Template, 2, 0, \"th\", 5);\n            i0.ɵɵtemplate(11, PresencaComponent_td_11_Template, 2, 1, \"td\", 6);\n            i0.ɵɵelementContainerEnd();\n            i0.ɵɵelementContainerStart(12, 7);\n            i0.ɵɵtemplate(13, PresencaComponent_th_13_Template, 2, 0, \"th\", 5);\n            i0.ɵɵtemplate(14, PresencaComponent_td_14_Template, 3, 4, \"td\", 6);\n            i0.ɵɵelementContainerEnd();\n            i0.ɵɵelementContainerStart(15, 8);\n            i0.ɵɵtemplate(16, PresencaComponent_th_16_Template, 2, 0, \"th\", 5);\n            i0.ɵɵtemplate(17, PresencaComponent_td_17_Template, 2, 1, \"td\", 6);\n            i0.ɵɵelementContainerEnd();\n            i0.ɵɵtemplate(18, PresencaComponent_tr_18_Template, 1, 0, \"tr\", 9);\n            i0.ɵɵtemplate(19, PresencaComponent_tr_19_Template, 1, 0, \"tr\", 10);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"dataSource\", ctx.presencas);\n            i0.ɵɵadvance(10);\n            i0.ɵɵproperty(\"matHeaderRowDef\", i0.ɵɵpureFunction0(3, _c0));\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"matRowDefColumns\", i0.ɵɵpureFunction0(4, _c0));\n          }\n        },\n        dependencies: [i4.MatButton, i5.MatTable, i5.MatHeaderCellDef, i5.MatHeaderRowDef, i5.MatColumnDef, i5.MatCellDef, i5.MatRowDef, i5.MatHeaderCell, i5.MatCell, i5.MatHeaderRow, i5.MatRow, i6.MatIcon, i7.DatePipe],\n        styles: [\".container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}h1[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}button[_ngcontent-%COMP%]{margin-bottom:20px}.table-container[_ngcontent-%COMP%]{margin-top:20px;overflow-x:auto}table[_ngcontent-%COMP%]{width:100%}.mat-column-pessoa[_ngcontent-%COMP%]{min-width:200px}.mat-column-date[_ngcontent-%COMP%]{min-width:120px}.mat-column-observation[_ngcontent-%COMP%]{min-width:300px}.mat-mdc-row[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-bottom:32px}mat-form-field[_ngcontent-%COMP%]{width:100%}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:16px}h2[_ngcontent-%COMP%]{color:#333;margin-bottom:24px}.presencas-list[_ngcontent-%COMP%]{margin-top:32px}th.mat-header-cell[_ngcontent-%COMP%]{font-weight:700;color:#000000de}.error-snackbar[_ngcontent-%COMP%]{background:#f44336;color:#fff}.success-snackbar[_ngcontent-%COMP%]{background:#4caf50;color:#fff}\"]\n      });\n    }\n  }\n  return PresencaComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}