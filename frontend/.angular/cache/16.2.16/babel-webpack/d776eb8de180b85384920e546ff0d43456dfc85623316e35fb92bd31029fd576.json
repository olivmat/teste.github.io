{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common/http\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/datepicker\";\nfunction PresencaCadastroModalComponent_table_9_tr_12_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 19);\n  }\n  if (rf & 2) {\n    const pessoa_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", pessoa_r4.foto, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction PresencaCadastroModalComponent_table_9_tr_12_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const pessoa_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", pessoa_r4.sexo === \"Masculino\" ? \"\\uD83D\\uDC66\" : pessoa_r4.sexo === \"Feminino\" ? \"\\uD83D\\uDC67\" : \"\\uD83D\\uDC76\", \" \");\n  }\n}\nfunction PresencaCadastroModalComponent_table_9_tr_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtemplate(2, PresencaCadastroModalComponent_table_9_tr_12_img_2_Template, 1, 1, \"img\", 16);\n    i0.ɵɵtemplate(3, PresencaCadastroModalComponent_table_9_tr_12_span_3_Template, 2, 1, \"span\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\")(9, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function PresencaCadastroModalComponent_table_9_tr_12_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const pessoa_r4 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.selecionarPessoa(pessoa_r4));\n    });\n    i0.ɵɵtext(10, \"Selecionar\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const pessoa_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"selected\", ctx_r3.pessoaSelecionada && ctx_r3.pessoaSelecionada.id === pessoa_r4.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", pessoa_r4.foto && (pessoa_r4.foto.startsWith(\"http\") || pessoa_r4.foto.startsWith(\"/uploads/\")));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !pessoa_r4.foto || pessoa_r4.foto === \"-\" || !pessoa_r4.foto.startsWith(\"http\") && !pessoa_r4.foto.startsWith(\"/uploads/\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pessoa_r4.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pessoa_r4.responsavel);\n  }\n}\nfunction PresencaCadastroModalComponent_table_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 14)(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"Foto\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Nome\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Respons\\u00E1vel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Selecionar\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"tbody\");\n    i0.ɵɵtemplate(12, PresencaCadastroModalComponent_table_9_tr_12_Template, 11, 6, \"tr\", 15);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.pessoasFiltradas);\n  }\n}\nfunction PresencaCadastroModalComponent_mat_error_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Data \\u00E9 obrigat\\u00F3ria \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function () {\n  return {\n    standalone: true\n  };\n};\nexport class PresencaCadastroModalComponent {\n  constructor(dialogRef, fb, http) {\n    this.dialogRef = dialogRef;\n    this.fb = fb;\n    this.http = http;\n    this.pessoas = [];\n    this.pessoasFiltradas = [];\n    this.buscaNome = '';\n    this.pessoaSelecionada = null;\n    this.presencaForm = this.fb.group({\n      person_id: ['', Validators.required],\n      date: [new Date(), Validators.required]\n    });\n  }\n  ngOnInit() {\n    this.http.get('http://localhost:8000/people/').subscribe(data => {\n      this.pessoas = data;\n      this.filtrarPessoas();\n    });\n  }\n  filtrarPessoas() {\n    const termo = this.buscaNome.trim().toLowerCase();\n    if (!termo) {\n      this.pessoasFiltradas = this.pessoas;\n    } else {\n      this.pessoasFiltradas = this.pessoas.filter(p => p.name.toLowerCase().startsWith(termo));\n    }\n  }\n  selecionarPessoa(pessoa) {\n    this.pessoaSelecionada = pessoa;\n    this.presencaForm.patchValue({\n      person_id: pessoa.id\n    });\n  }\n  onSubmit() {\n    if (this.presencaForm.valid) {\n      const presencaData = this.presencaForm.value;\n      this.dialogRef.close({\n        person_id: presencaData.person_id,\n        date: presencaData.date\n      });\n    }\n  }\n  onCancel() {\n    this.dialogRef.close();\n  }\n  static {\n    this.ɵfac = function PresencaCadastroModalComponent_Factory(t) {\n      return new (t || PresencaCadastroModalComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.HttpClient));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PresencaCadastroModalComponent,\n      selectors: [[\"app-presenca-cadastro-modal\"]],\n      decls: 23,\n      vars: 9,\n      consts: [[\"mat-dialog-title\", \"\"], [1, \"form-container\", 3, \"formGroup\", \"ngSubmit\"], [\"appearance\", \"outline\", 2, \"width\", \"100%\", \"margin-bottom\", \"8px\"], [\"matInput\", \"\", \"placeholder\", \"Digite o nome...\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\"], [1, \"caixa-vazia\"], [\"class\", \"tabela-cadastro-crianca\", 4, \"ngIf\"], [\"appearance\", \"outline\", 2, \"width\", \"100%\", \"margin-top\", \"12px\"], [\"matInput\", \"\", \"formControlName\", \"date\", 3, \"matDatepicker\"], [\"matSuffix\", \"\", 3, \"for\"], [\"picker\", \"\"], [4, \"ngIf\"], [\"align\", \"end\"], [\"mat-button\", \"\", \"type\", \"button\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"type\", \"submit\", 3, \"disabled\", \"click\"], [1, \"tabela-cadastro-crianca\"], [3, \"selected\", 4, \"ngFor\", \"ngForOf\"], [\"alt\", \"Foto\", \"class\", \"foto-avatar\", 3, \"src\", 4, \"ngIf\"], [\"class\", \"foto-avatar\", 4, \"ngIf\"], [\"mat-button\", \"\", \"color\", \"primary\", \"type\", \"button\", 3, \"click\"], [\"alt\", \"Foto\", 1, \"foto-avatar\", 3, \"src\"], [1, \"foto-avatar\"]],\n      template: function PresencaCadastroModalComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"h2\", 0);\n          i0.ɵɵtext(1, \"Registrar Presen\\u00E7a\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(2, \"mat-dialog-content\")(3, \"form\", 1);\n          i0.ɵɵlistener(\"ngSubmit\", function PresencaCadastroModalComponent_Template_form_ngSubmit_3_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(4, \"mat-form-field\", 2)(5, \"mat-label\");\n          i0.ɵɵtext(6, \"Buscar pelo nome da crian\\u00E7a\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"input\", 3);\n          i0.ɵɵlistener(\"ngModelChange\", function PresencaCadastroModalComponent_Template_input_ngModelChange_7_listener($event) {\n            return ctx.buscaNome = $event;\n          })(\"ngModelChange\", function PresencaCadastroModalComponent_Template_input_ngModelChange_7_listener() {\n            return ctx.filtrarPessoas();\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(8, \"div\", 4);\n          i0.ɵɵtemplate(9, PresencaCadastroModalComponent_table_9_Template, 13, 1, \"table\", 5);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"mat-form-field\", 6)(11, \"mat-label\");\n          i0.ɵɵtext(12, \"Data\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(13, \"input\", 7)(14, \"mat-datepicker-toggle\", 8)(15, \"mat-datepicker\", null, 9);\n          i0.ɵɵtemplate(17, PresencaCadastroModalComponent_mat_error_17_Template, 2, 0, \"mat-error\", 10);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(18, \"mat-dialog-actions\", 11)(19, \"button\", 12);\n          i0.ɵɵlistener(\"click\", function PresencaCadastroModalComponent_Template_button_click_19_listener() {\n            return ctx.onCancel();\n          });\n          i0.ɵɵtext(20, \"Cancelar\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"button\", 13);\n          i0.ɵɵlistener(\"click\", function PresencaCadastroModalComponent_Template_button_click_21_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵtext(22, \" Registrar \");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          const _r1 = i0.ɵɵreference(16);\n          let tmp_6_0;\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"formGroup\", ctx.presencaForm);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.buscaNome)(\"ngModelOptions\", i0.ɵɵpureFunction0(8, _c0));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.pessoasFiltradas.length > 0);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"matDatepicker\", _r1);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"for\", _r1);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", (tmp_6_0 = ctx.presencaForm.get(\"date\")) == null ? null : tmp_6_0.hasError(\"required\"));\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"disabled\", !ctx.presencaForm.valid || !ctx.pessoaSelecionada);\n        }\n      },\n      dependencies: [i4.NgForOf, i4.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.NgModel, i2.FormGroupDirective, i2.FormControlName, i5.MatButton, i6.MatInput, i7.MatFormField, i7.MatLabel, i7.MatError, i7.MatSuffix, i8.MatDatepicker, i8.MatDatepickerInput, i8.MatDatepickerToggle, i1.MatDialogTitle, i1.MatDialogContent, i1.MatDialogActions],\n      styles: [\"h2[mat-dialog-title][_ngcontent-%COMP%] {\\n  margin: 0 0 16px;\\n  color: #333;\\n  font-size: 20px;\\n  font-weight: 500;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.form-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 16px;\\n  min-width: 400px;\\n  padding: 16px 0;\\n}\\n\\n.caixa-vazia[_ngcontent-%COMP%] {\\n  width: 100%;\\n  min-height: 32px;\\n  background: #f5f5f5;\\n  border-radius: 8px;\\n  margin-bottom: 12px;\\n  padding: 8px 0;\\n}\\n\\n.tabela-cadastro-crianca[_ngcontent-%COMP%] {\\n  width: 100%;\\n  border-collapse: separate;\\n  border-spacing: 0 2px;\\n  background: #fff;\\n  font-size: 14px;\\n}\\n.tabela-cadastro-crianca[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tabela-cadastro-crianca[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n  padding: 4px 8px;\\n  vertical-align: middle;\\n  border-bottom: 1px solid #f0f0f0;\\n}\\n.tabela-cadastro-crianca[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\n  background: #f5f5f5;\\n  font-weight: 600;\\n}\\n.tabela-cadastro-crianca[_ngcontent-%COMP%]   .foto-avatar[_ngcontent-%COMP%] {\\n  width: 36px;\\n  height: 36px;\\n  object-fit: cover;\\n  border-radius: 50%;\\n  border: 2px solid #eee;\\n  background: #fafafa;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: 20px;\\n  margin: 0 auto;\\n}\\n.tabela-cadastro-crianca[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%] {\\n  background: #e3f2fd !important;\\n} \\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcHJlc2VuY2EvcHJlc2VuY2EtY2FkYXN0cm8tbW9kYWwvcHJlc2VuY2EtY2FkYXN0cm8tbW9kYWwuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGdCQUFnQjtFQUNoQixXQUFXO0VBQ1gsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLFFBQVE7QUFDVjs7QUFFQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsU0FBUztFQUNULGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsV0FBVztFQUNYLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsa0JBQWtCO0VBQ2xCLG1CQUFtQjtFQUNuQixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsV0FBVztFQUNYLHlCQUF5QjtFQUN6QixxQkFBcUI7RUFDckIsZ0JBQWdCO0VBQ2hCLGVBQWU7QUFDakI7QUFDQTtFQUNFLGdCQUFnQjtFQUNoQixzQkFBc0I7RUFDdEIsZ0NBQWdDO0FBQ2xDO0FBQ0E7RUFDRSxtQkFBbUI7RUFDbkIsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLGlCQUFpQjtFQUNqQixrQkFBa0I7RUFDbEIsc0JBQXNCO0VBQ3RCLG1CQUFtQjtFQUNuQixhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixlQUFlO0VBQ2YsY0FBYztBQUNoQjtBQUNBO0VBQ0UsOEJBQThCO0FBQ2hDIiwic291cmNlc0NvbnRlbnQiOlsiaDJbbWF0LWRpYWxvZy10aXRsZV0ge1xyXG4gIG1hcmdpbjogMCAwIDE2cHg7XHJcbiAgY29sb3I6ICMzMzM7XHJcbiAgZm9udC1zaXplOiAyMHB4O1xyXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGdhcDogOHB4O1xyXG59XHJcblxyXG4uZm9ybS1jb250YWluZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBnYXA6IDE2cHg7XHJcbiAgbWluLXdpZHRoOiA0MDBweDtcclxuICBwYWRkaW5nOiAxNnB4IDA7XHJcbn1cclxuXHJcbi5jYWl4YS12YXppYSB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgbWluLWhlaWdodDogMzJweDtcclxuICBiYWNrZ3JvdW5kOiAjZjVmNWY1O1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICBtYXJnaW4tYm90dG9tOiAxMnB4O1xyXG4gIHBhZGRpbmc6IDhweCAwO1xyXG59XHJcblxyXG4udGFiZWxhLWNhZGFzdHJvLWNyaWFuY2Ege1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGJvcmRlci1jb2xsYXBzZTogc2VwYXJhdGU7XHJcbiAgYm9yZGVyLXNwYWNpbmc6IDAgMnB4O1xyXG4gIGJhY2tncm91bmQ6ICNmZmY7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG59XHJcbi50YWJlbGEtY2FkYXN0cm8tY3JpYW5jYSB0aCwgLnRhYmVsYS1jYWRhc3Ryby1jcmlhbmNhIHRkIHtcclxuICBwYWRkaW5nOiA0cHggOHB4O1xyXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmMGYwZjA7XHJcbn1cclxuLnRhYmVsYS1jYWRhc3Ryby1jcmlhbmNhIHRoIHtcclxuICBiYWNrZ3JvdW5kOiAjZjVmNWY1O1xyXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbn1cclxuLnRhYmVsYS1jYWRhc3Ryby1jcmlhbmNhIC5mb3RvLWF2YXRhciB7XHJcbiAgd2lkdGg6IDM2cHg7XHJcbiAgaGVpZ2h0OiAzNnB4O1xyXG4gIG9iamVjdC1maXQ6IGNvdmVyO1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICBib3JkZXI6IDJweCBzb2xpZCAjZWVlO1xyXG4gIGJhY2tncm91bmQ6ICNmYWZhZmE7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIGZvbnQtc2l6ZTogMjBweDtcclxuICBtYXJnaW46IDAgYXV0bztcclxufVxyXG4udGFiZWxhLWNhZGFzdHJvLWNyaWFuY2EgdHIuc2VsZWN0ZWQge1xyXG4gIGJhY2tncm91bmQ6ICNlM2YyZmQgIWltcG9ydGFudDtcclxufSAiXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["Validators","i0","ɵɵelement","ɵɵproperty","pessoa_r4","foto","ɵɵsanitizeUrl","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","sexo","ɵɵtemplate","PresencaCadastroModalComponent_table_9_tr_12_img_2_Template","PresencaCadastroModalComponent_table_9_tr_12_span_3_Template","ɵɵlistener","PresencaCadastroModalComponent_table_9_tr_12_Template_button_click_9_listener","restoredCtx","ɵɵrestoreView","_r10","$implicit","ctx_r9","ɵɵnextContext","ɵɵresetView","selecionarPessoa","ɵɵclassProp","ctx_r3","pessoaSelecionada","id","startsWith","ɵɵtextInterpolate","name","responsavel","PresencaCadastroModalComponent_table_9_tr_12_Template","ctx_r0","pessoasFiltradas","PresencaCadastroModalComponent","constructor","dialogRef","fb","http","pessoas","buscaNome","presencaForm","group","person_id","required","date","Date","ngOnInit","get","subscribe","data","filtrarPessoas","termo","trim","toLowerCase","filter","p","pessoa","patchValue","onSubmit","valid","presencaData","value","close","onCancel","ɵɵdirectiveInject","i1","MatDialogRef","i2","FormBuilder","i3","HttpClient","selectors","decls","vars","consts","template","PresencaCadastroModalComponent_Template","rf","ctx","PresencaCadastroModalComponent_Template_form_ngSubmit_3_listener","PresencaCadastroModalComponent_Template_input_ngModelChange_7_listener","$event","PresencaCadastroModalComponent_table_9_Template","PresencaCadastroModalComponent_mat_error_17_Template","PresencaCadastroModalComponent_Template_button_click_19_listener","PresencaCadastroModalComponent_Template_button_click_21_listener","ɵɵpureFunction0","_c0","length","_r1","tmp_6_0","hasError"],"sources":["C:\\Users\\mathe\\Documents\\Kids\\Cadastro Local Kids\\frontend\\src\\app\\presenca\\presenca-cadastro-modal\\presenca-cadastro-modal.component.ts","C:\\Users\\mathe\\Documents\\Kids\\Cadastro Local Kids\\frontend\\src\\app\\presenca\\presenca-cadastro-modal\\presenca-cadastro-modal.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\n@Component({\r\n  selector: 'app-presenca-cadastro-modal',\r\n  templateUrl: './presenca-cadastro-modal.component.html',\r\n  styleUrls: ['./presenca-cadastro-modal.component.css']\r\n})\r\nexport class PresencaCadastroModalComponent implements OnInit {\r\n  presencaForm: FormGroup;\r\n  pessoas: any[] = [];\r\n  pessoasFiltradas: any[] = [];\r\n  buscaNome: string = '';\r\n  pessoaSelecionada: any = null;\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<PresencaCadastroModalComponent>,\r\n    private fb: FormBuilder,\r\n    private http: HttpClient\r\n  ) {\r\n    this.presencaForm = this.fb.group({\r\n      person_id: ['', Validators.required],\r\n      date: [new Date(), Validators.required]\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.http.get('http://localhost:8000/people/').subscribe((data: any) => {\r\n      this.pessoas = data;\r\n      this.filtrarPessoas();\r\n    });\r\n  }\r\n\r\n  filtrarPessoas() {\r\n    const termo = this.buscaNome.trim().toLowerCase();\r\n    if (!termo) {\r\n      this.pessoasFiltradas = this.pessoas;\r\n    } else {\r\n      this.pessoasFiltradas = this.pessoas.filter(p => p.name.toLowerCase().startsWith(termo));\r\n    }\r\n  }\r\n\r\n  selecionarPessoa(pessoa: any) {\r\n    this.pessoaSelecionada = pessoa;\r\n    this.presencaForm.patchValue({ person_id: pessoa.id });\r\n  }\r\n\r\n  onSubmit() {\r\n    if (this.presencaForm.valid) {\r\n      const presencaData = this.presencaForm.value;\r\n      this.dialogRef.close({\r\n        person_id: presencaData.person_id,\r\n        date: presencaData.date\r\n      });\r\n    }\r\n  }\r\n\r\n  onCancel() {\r\n    this.dialogRef.close();\r\n  }\r\n} ","<h2 mat-dialog-title>Registrar Presença</h2>\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"presencaForm\" (ngSubmit)=\"onSubmit()\" class=\"form-container\">\r\n    <mat-form-field appearance=\"outline\" style=\"width: 100%; margin-bottom: 8px;\">\r\n      <mat-label>Buscar pelo nome da criança</mat-label>\r\n      <input matInput [(ngModel)]=\"buscaNome\" (ngModelChange)=\"filtrarPessoas()\" placeholder=\"Digite o nome...\" [ngModelOptions]=\"{standalone: true}\" />\r\n    </mat-form-field>\r\n    <div class=\"caixa-vazia\">\r\n      <table *ngIf=\"pessoasFiltradas.length > 0\" class=\"tabela-cadastro-crianca\">\r\n        <thead>\r\n          <tr>\r\n            <th>Foto</th>\r\n            <th>Nome</th>\r\n            <th>Responsável</th>\r\n            <th>Selecionar</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr *ngFor=\"let pessoa of pessoasFiltradas\" [class.selected]=\"pessoaSelecionada && pessoaSelecionada.id === pessoa.id\">\r\n            <td>\r\n              <img *ngIf=\"pessoa.foto && (pessoa.foto.startsWith('http') || pessoa.foto.startsWith('/uploads/'))\" [src]=\"pessoa.foto\" alt=\"Foto\" class=\"foto-avatar\" />\r\n              <span *ngIf=\"!pessoa.foto || pessoa.foto === '-' || (!pessoa.foto.startsWith('http') && !pessoa.foto.startsWith('/uploads/'))\" class=\"foto-avatar\">\r\n                {{ pessoa.sexo === 'Masculino' ? '👦' : (pessoa.sexo === 'Feminino' ? '👧' : '👶') }}\r\n              </span>\r\n            </td>\r\n            <td>{{ pessoa.name }}</td>\r\n            <td>{{ pessoa.responsavel }}</td>\r\n            <td>\r\n              <button mat-button color=\"primary\" type=\"button\" (click)=\"selecionarPessoa(pessoa)\">Selecionar</button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <mat-form-field appearance=\"outline\" style=\"width: 100%; margin-top: 12px;\">\r\n      <mat-label>Data</mat-label>\r\n      <input matInput [matDatepicker]=\"picker\" formControlName=\"date\">\r\n      <mat-datepicker-toggle matSuffix [for]=\"picker\"></mat-datepicker-toggle>\r\n      <mat-datepicker #picker></mat-datepicker>\r\n      <mat-error *ngIf=\"presencaForm.get('date')?.hasError('required')\">\r\n        Data é obrigatória\r\n      </mat-error>\r\n    </mat-form-field>\r\n  </form>\r\n</mat-dialog-content>\r\n<mat-dialog-actions align=\"end\">\r\n  <button mat-button type=\"button\" (click)=\"onCancel()\">Cancelar</button>\r\n  <button mat-raised-button color=\"primary\" type=\"submit\" [disabled]=\"!presencaForm.valid || !pessoaSelecionada\" (click)=\"onSubmit()\">\r\n    Registrar\r\n  </button>\r\n</mat-dialog-actions> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}